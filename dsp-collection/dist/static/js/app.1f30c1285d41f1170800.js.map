{"version":3,"sources":["webpack:///src/components/Index.vue","webpack:///./src/components/Index.vue?77f1","webpack:///./src/components/Index.vue","webpack:///src/App.vue","webpack:///./src/App.vue?0518","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["Index","name","data","productList","api_key","this","$cookies","get","input","currentPage","currentDate","Date","pushNumber","pushNumberShow","publishLoading","organizationArray","organizationMap","landon-test-01","dropshipping-release-incy","automizely-store","appData","app","key","platform","organization","id","priceFactors","min","max","factor","originFactor","created","methods","initOrganization","handleCurrentChange","val","getProductsList","page","arguments","length","undefined","self","headers","set","split","queryStr","join","params","limit","external_vendor_product_ids","$axios","then","response","products","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","get_iterator_default","next","done","product","value","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","variants","variant","price","amount","_","round","err","return","productsPricesHandler","pushProductsList","_this","am-api-key","_loop","o","pushProduct","cloneDeepWith","post","product_id","publishProduct","$set","catch","e","console","log","message","universal_product_ids","universal_product_id","app_key","app_platform","organization_id","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","getDropshippingProductId","_this2","publishData","shipping_prices","shippingPriceMap","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","shipping_price","shipping_options","shippingOptionsMap","external_vendor_variant_ids","keyBy","country","shipping_method","shippingOptionRes","cloneDeep","prices","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","universal_variant_ids","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","variantShippingPrice","universal_variant_id","variantxSellPrice","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","priceFactor","multiply","origin_amount","shipping_amount","add","components_Index","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","type","placeholder","model","callback","$$v","expression","_v","_l","item","index","label","size","on","click","$event","title","onConfirm","slot","loading","directives","rawName","_s","staticStyle","width","margin","margin-right","margin-bottom","span","body-style","padding","src","image_urls","slice","ov","external_vendor_product_id","color","requestErrorMsg","requestSuccess","current-page","page-size","layout","total","current-change","update:currentPage","staticRenderFns","App","components","__webpack_require__","normalizeComponent","ssrContext","selectortype_template_index_0_src_App","src_App","App_normalizeComponent","vue_runtime_esm","config","productionTip","use","element_ui_common_default","a","vue_cookies_default","prototype","axios_default","$qs","lib_default","lodash_default","defaults","withCredentials","el","h"],"mappings":"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","file":"static/js/app.1f30c1285d41f1170800.js","sourcesContent":["<template>\n  <div class=\"hello\">\n    <el-form>\n      <el-form-item>\n        <el-input\n     v-model=\"api_key\"\n     type=\"password\"\n     placeholder=\"请输入API KEY\"\n     ></el-input>\n     <!-- <el-input\n      v-model=\"appData.app.key\"\n      placeholder=\"请输入店铺app key\"\n     ></el-input> -->\n     <el-select v-model=\"appData.app.key\" placeholder=\"请选择\">\n      <el-option\n        v-for=\"(item, index) in organizationArray\"\n        :key=\"item\"\n        :label=\"item\"\n        :value=\"item\">\n      </el-option>\n    </el-select>\n    <el-input\n     v-model=\"input\"\n     placeholder=\"搜索内容\"\n     type=\"textarea\"\n     ></el-input>\n      </el-form-item>\n      <el-form-item>\n    <el-button size=\"small\" type=\"primary\" @click=\"getProductsList(1)\">商品查询</el-button>\n    <el-popconfirm\n      @onConfirm=\"pushProductsList\"\n      title=\"确定要推送这些商品吗？？\"\n    >\n      <el-button slot=\"reference\" size=\"small\" :loading=\"publishLoading\">推送选中的所有商品</el-button>\n    </el-popconfirm>\n    \n    <span v-show=\"pushNumberShow\">推送成功数量:{{pushNumber}}</span>\n      </el-form-item>\n  </el-form>\n  <div style=\"width:96%; margin:0 auto\">\n<el-row >\n  <el-col :span=\"11\" v-for=\"(o) in productList\" :key=\"o\" style=\"margin-right:6px;margin-bottom:6px\">\n    <el-card :body-style=\"{ padding: '0px'}\">\n      <img :src=\"o.image_urls[0]\" class=\"image\">\n      <div style=\"padding: 8px;\">\n        <b class=\"title\">{{o.title}}</b>\n        <div v-for=\"(ov) in o.variants.slice(0,1)\" >\n          <span class=\"price-title\">销售价:</span> <span class=\"price\">${{ov.price.amount / 100}}</span> \n          <span class=\"price-title\">成本价:</span> <span class=\"price\">${{ov.price.origin_amount / 100}}</span> <br />\n          <span class=\"price-title\">运费价:</span> <span class=\"price\">${{ov.price.shipping_amount / 100}}</span> \n        <span class=\"product-id\">{{o.external_vendor_product_id}}</span></div>\n        <div class=\"bottom clearfix\">\n          <b style=\"color: red\">{{o.requestErrorMsg}} </b>\n          <b style=\"color: green\">{{o.requestSuccess}}</b>\n          <!-- <el-button type=\"text\" class=\"button\">操作按钮</el-button> -->\n        </div>\n      </div>\n    </el-card>\n  </el-col>\n</el-row>\n<el-pagination\n    @current-change=\"handleCurrentChange\"\n    :current-page.sync=\"currentPage\"\n    :page-size=\"100\"\n    layout=\"prev, pager, next, jumper\"\n    :total=\"60000\">\n  </el-pagination>\n  </div>\n  \n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Index',\n  data () {\n    return {\n      productList: [],\n      api_key: this.$cookies.get('am-api-key'),\n      input: '8114333',\n      currentPage: 1,\n      currentDate: new Date(),\n      pushNumber: 0,\n      pushNumberShow:false,\n      publishLoading: false,\n      organizationArray: [\n        \"landon-test-01\",\n        \"dropshipping-release-incy\",\n        \"automizely-store\",\n      ],\n      organizationMap: {\n        \"landon-test-01\": \"9bba1ea4d5a144049772bef6b7a1841a\",\n        \"dropshipping-release-incy\": \"86cf3a92b2c04d849a6056e7cd82e043\",\n        // \"automizely-store\":\"b82f5a20ae024f5f82f2a90e8a54bc35\",\n        \"automizely-store\":\"86cf3a92b2c04d849a6056e7cd82e043\",\n      },\n      appData: {\n        app: {\n          key: \"automizely-store\",\n          name: \"aftership\",\n          platform: \"shopify\"\n        },\n        organization: {\n          id: \"\"\n        }\n      },\n      priceFactors: [\n        {\n          min: 0,\n          max: 499,\n          factor: \"1.5\",\n          originFactor: \"2.5\",\n        },\n        {\n          min: 500,\n          max: 999,\n          factor: \"1.25\",\n          originFactor: \"2\",\n        },\n        {\n          min: 1000,\n          max: 999999999,\n          factor: \"1.1\",\n          originFactor: \"1.5\",\n        }\n      ]\n    }\n  },\n  created: function () {\n      const self = this;\n\n      // self.setApiKey()\n      // self.getProductsList();\n\t\t},\n  methods: {\n    initOrganization(){\n      this.appData.organization.id = this.organizationMap[this.appData.app.key]\n    },\n    \n    handleCurrentChange(val) {\n      this.currentPage = val;\n      this.getProductsList(this.currentPage)\n        // console.log(`当前页: ${val}`);\n        // getProductsList(val)\n    },\n    getProductsList(page =1 ){\n      const self = this;\n      \n      //api-key处理\n      let headers = {};\n      if(self.api_key){\n        self.$cookies.set('am-api-key', self.api_key)\n        headers['am-api-key'] = self.api_key\n      }\n\n      let data = self.input.split(/[\\s\\n]/);\n      let queryStr = ''\n      if(data){\n        queryStr = data.join(',')\n      }\n\n      let params = {page: page, limit:50}\n      params.external_vendor_product_ids = queryStr\n\n\t\t\tself.$axios.get(process.env.VUE_APP_API_URL_SUPPLIER + '/suppliers/v1/products',{params:params,  headers:headers}).then((response) => {\n        //修复精度问题。\n        let products = response.data.data.products;\n        for(let product of products){\n          // 处理成最终价格\n          for(let variant of product.variants){\n            variant.price.amount = _.round(variant.price.amount, 0)\n          }\n          product = self.productsPricesHandler(product);\n        }\n\n        self.productList = products;\n          \n      })\n\n    },\n    pushProductsList(){\n      const self = this;\n\n      self.initOrganization()\n\n      self.publishLoading = true;\n      self.pushNumberShow = true;\n      self.pushNumber = 0;\n      let headers = {\n        'am-api-key': self.api_key, \n        // \"Content-Type\": \"application/json\",\n      };\n\n      for (let o of self.productList){\n        //处理商品价格\n        // let pushProduct = o;\n        \n        let pushProduct = _.cloneDeepWith(o)\n        \n        // pushProduct = self.productsPricesHandler(pushProduct);\n        // let product_id = o.id\n\n        pushProduct.app = self.appData.app;\n        pushProduct.organization = self.appData.organization;\n\n        self.$axios.post(process.env.VUE_APP_API_URL_DROPSHIPPING +'/dropshipping/v1/products',pushProduct, {headers:headers}).then((response) => {\n          self.pushNumber ++\n          let product_id = response.data.data.id\n          self.publishProduct(product_id, o)\n          \n          \n          self.$set(o,\"requestSuccess\", '推送中，请稍后~')\n        }).catch(e => {\n          console.log(e.message);\n\n          if(e.message == 'Request failed with status code 409'){\n            //查出该商品信息\n            let params = {\n              universal_product_ids: o.universal_product_id,\n              app_key: self.appData.app.key,\n              app_platform: self.appData.app.platform,\n              organization_id: self.appData.organization.id,\n            }\n            self.$axios.get(process.env.VUE_APP_API_URL_DROPSHIPPING +'/dropshipping/v1/products', {headers:headers,params: params}).then((response) => {\n              console.log(response.data.data);\n            })\n            // self.publishProduct(product_id)\n            this.$set(o,\"requestSuccess\", '此商品曾被推送成功')\n          }else{\n            this.$set(o,\"requestSuccess\", '')\n            this.$set(o,\"requestErrorMsg\", '推送失败: ' + e.message)\n          }\n          self.publishLoading = false;\n        })\n      }\n     \n    },\n    getDropshippingProductId(universal_product_id){\n\n    },\n    publishProduct(product_id, o){\n      const self = this;\n      let headers = {\n        'am-api-key': self.api_key, \n        // \"Content-Type\": \"application/json\",\n      };\n\n      let publishData = self.appData\n\n      self.$axios.post(process.env.VUE_APP_API_URL_DROPSHIPPING +'/dropshipping/v1/products/' + product_id + '/publish',publishData, {headers:headers}).then((response) => {\n        self.publishLoading = false;\n        this.$set(o,\"requestSuccess\", '推送成功')\n      }).catch(e => {\n        self.publishLoading = false;\n        console.log('推送失败');\n      })\n    },\n    productsPricesHandler(product){\n      const self = this;\n      // let shipping_prices = product.shipping_prices;\n      // let variants = product.variants;\n      if(product.shipping_prices.length == 0){\n        return product\n      }\n      // let variantsMap = _.key(variants, 'id')\n\n      let shippingPriceMap = {}\n\n      for(let shipping_price of product.shipping_prices){\n        let shipping_options = shipping_price.shipping_options\n        let external_vendor_variant_ids = shipping_price.external_vendor_variant_ids\n        \n        let shippingOptionsMap = _.keyBy(shipping_options, function(o) {\n          return o.country + '-'+ o.shipping_method;\n        })   //读出所有物流方式，以国家+快递类型组合，如US-USPS\n\n        //判断哪个价格低：\n        let shippingOptionRes = null;\n        if(shippingOptionsMap[\"USA-USPS\"]){\n          shippingOptionRes = _.cloneDeep(shippingOptionsMap[\"USA-USPS\"])\n        }else if(shippingOptionsMap[\"USA-4PX\"]){\n          shippingOptionRes = _.cloneDeep(shippingOptionsMap[\"USA-4PX\"])\n        }else if(shippingOptionsMap[\"USA-US Express Shipping\"]){\n          shippingOptionRes = _.cloneDeep(shippingOptionsMap[\"USA-US Express Shipping\"])\n        }else if(shippingOptionsMap[\"USA-US Standard\"]){\n          shippingOptionRes = _.cloneDeep(shippingOptionsMap[\"USA-US Standard\"])\n        }\n        \n\n        try{\n          shippingOptionRes.prices = _.keyBy(shippingOptionRes.prices, 'unit')\n        }catch(e){\n\n          // console.log(product.external_vendor_product_id);\n          // console.log('+============');\n        }\n\n        //TODO： 若此处没有运费价格，应该是要返回报错的。\n        if(!shippingOptionRes){\n          return product\n        }\n\n        for(let universal_variant_id of shipping_price.universal_variant_ids){\n          shippingPriceMap[universal_variant_id] = shippingOptionRes;\n        }\n      }\n\n      for(let variant of product.variants){\n        const variantShippingPrice = shippingPriceMap[variant.universal_variant_id]\n        //循环给price 进行加价\n        let variantxSellPrice = 0;\n\n        for(let priceFactor of self.priceFactors){\n          if(priceFactor.min <= variant.price.amount && variant.price.amount <= priceFactor.max){\n            variantxSellPrice = _.round(_.multiply(variant.price.amount, priceFactor.factor),0)\n          }\n        }\n\n        variant.price.origin_amount = variant.price.amount;\n        try{\n          variant.price.shipping_amount = variantShippingPrice.prices[1].amount;\n        }catch(e){\n        }\n        variant.price.amount = _.round(_.add(variantxSellPrice, variantShippingPrice.prices[1].amount), 0)\n      }\n\n      return product\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  .time {\n    font-size: 13px;\n    color: #999;\n  }\n  \n  .bottom {\n    margin-top: 13px;\n    line-height: 12px;\n  }\n\n  .button {\n    padding: 0;\n    float: right;\n  }\n\n  .image {\n    /* width: 100%; */\n    height: 100px;\n    margin:0 auto;\n    display: block;\n  }\n\n  .clearfix:before,\n  .clearfix:after {\n      display: table;\n      content: \"\";\n  }\n  .title{\n    font-size: 10px;\n    display: -webkit-box;\n    overflow: hidden;\n    -webkit-line-clamp: 2;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n  }\n  .price-title{\n    font-size: 0.5em ;\n    color: #777;\n  }\n  .price{\n    color: orange;\n  }\n  .product-id{\n    font-size: 8px;\n    color: grey;\n  }\n  .clearfix:after {\n      clear: both\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hello\"},[_c('el-form',[_c('el-form-item',[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入API KEY\"},model:{value:(_vm.api_key),callback:function ($$v) {_vm.api_key=$$v},expression:\"api_key\"}}),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.appData.app.key),callback:function ($$v) {_vm.$set(_vm.appData.app, \"key\", $$v)},expression:\"appData.app.key\"}},_vm._l((_vm.organizationArray),function(item,index){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})})),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"搜索内容\",\"type\":\"textarea\"},model:{value:(_vm.input),callback:function ($$v) {_vm.input=$$v},expression:\"input\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.getProductsList(1)}}},[_vm._v(\"商品查询\")]),_vm._v(\" \"),_c('el-popconfirm',{attrs:{\"title\":\"确定要推送这些商品吗？？\"},on:{\"onConfirm\":_vm.pushProductsList}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"size\":\"small\",\"loading\":_vm.publishLoading},slot:\"reference\"},[_vm._v(\"推送选中的所有商品\")])],1),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.pushNumberShow),expression:\"pushNumberShow\"}]},[_vm._v(\"推送成功数量:\"+_vm._s(_vm.pushNumber))])],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"96%\",\"margin\":\"0 auto\"}},[_c('el-row',_vm._l((_vm.productList),function(o){return _c('el-col',{key:o,staticStyle:{\"margin-right\":\"6px\",\"margin-bottom\":\"6px\"},attrs:{\"span\":11}},[_c('el-card',{attrs:{\"body-style\":{ padding: '0px'}}},[_c('img',{staticClass:\"image\",attrs:{\"src\":o.image_urls[0]}}),_vm._v(\" \"),_c('div',{staticStyle:{\"padding\":\"8px\"}},[_c('b',{staticClass:\"title\"},[_vm._v(_vm._s(o.title))]),_vm._v(\" \"),_vm._l((o.variants.slice(0,1)),function(ov){return _c('div',[_c('span',{staticClass:\"price-title\"},[_vm._v(\"销售价:\")]),_vm._v(\" \"),_c('span',{staticClass:\"price\"},[_vm._v(\"$\"+_vm._s(ov.price.amount / 100))]),_vm._v(\" \"),_c('span',{staticClass:\"price-title\"},[_vm._v(\"成本价:\")]),_vm._v(\" \"),_c('span',{staticClass:\"price\"},[_vm._v(\"$\"+_vm._s(ov.price.origin_amount / 100))]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('span',{staticClass:\"price-title\"},[_vm._v(\"运费价:\")]),_vm._v(\" \"),_c('span',{staticClass:\"price\"},[_vm._v(\"$\"+_vm._s(ov.price.shipping_amount / 100))]),_vm._v(\" \"),_c('span',{staticClass:\"product-id\"},[_vm._v(_vm._s(o.external_vendor_product_id))])])}),_vm._v(\" \"),_c('div',{staticClass:\"bottom clearfix\"},[_c('b',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(o.requestErrorMsg)+\" \")]),_vm._v(\" \"),_c('b',{staticStyle:{\"color\":\"green\"}},[_vm._v(_vm._s(o.requestSuccess))])])],2)])],1)})),_vm._v(\" \"),_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":100,\"layout\":\"prev, pager, next, jumper\",\"total\":60000},on:{\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.currentPage=$event}}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-64d76c3f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-64d76c3f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Index.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-64d76c3f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-64d76c3f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Index.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <!-- <img src=\"./assets/logo.png\"> -->\n    <Index/>\n  </div>\n</template>\n\n<script>\nimport Index from './components/Index'\n\nexport default {\n  name: 'App',\n  components: {\n    Index\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  /* text-align: center; */\n  color: #2c3e50;\n  /* margin-top: 60px; */\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Index')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2e755ecd\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2e755ecd\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2e755ecd\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport App from './App'\n\nimport axios from 'axios'\nimport VueAxios from 'vue-axios'\nimport qs from 'qs'\n\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport VueCookies from 'vue-cookies'\nimport _ from 'lodash'\n\n\n\nVue.config.productionTip = false\nVue.use(ElementUI)\nVue.use(VueCookies)\nVue.prototype.$axios = axios\nVue.prototype.$qs = qs;\n\nVue.prototype._ = _\n\n// axios.defaults.baseURL = '/'\naxios.defaults.headers.post['Content-Type'] = 'application/json';\naxios.defaults.withCredentials = true\n\n// Vue.config.productionTip = false\n\n\n\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}